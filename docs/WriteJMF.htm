<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Untitled Document</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style type="text/css">
<!--
  
   H2 {font-family: Arial;
      font-weight: 700;
      font-size: 12pt;}

   H3 {font-family: Tahoma;
      font-weight: 700;
      font-size: 10pt;
      color: black;
     }
   H4 {font-family: "Courier New", Courier, mono;
      font-weight: 100;
      font-size: 9pt;
      color: black;
     }
   H5 {font-family: Arial;
      font-weight: 500;
      font-size: 10pt;
      color: black;
     }
     
--></Style>
</head>

<body>
<h2>How to write a JMF message from scratch and fill it with various signals, queries and commands </h2>
<h5>
<p>(see Example 8)</p>
<br><strong>Step 1</strong><br>
  Set up the root process - create a root JMF node, using GetRoot(), initialize it, set attribute SenderID and other required attributes.
<h4>JDFJMF jmf=GetRoot();<br>
  jmf.init();<br>
  jmf.SetSenderID(&quot;MessageSender&quot;);</h4>
<h5><br><strong>Step 2</strong><br>
  Define what type of message you want to send and what Message Family this message belongs to. <br>
  For example, to append a KnownDevices message that is a message of a Query family, you should append a generic Query to the root and cast to its type (e.g. Type_KnownDevices)<br>
</h5><h4>JDFQuery queryKnownDevices=jmf.AppendQuery(JDFMessage::Type_KnownDevices);</h4>
<h5><br><strong>Step 3</strong><br>
  Define descriptive elements for your message. e.g. for KnownDevices message there is only one descriptive element - DeviceFilter<br>
  (For details see JDF Specification (Release 1.2) chapter 5.2.1 &ldquo;Message Families&rdquo; and chapter 5.5 &ldquo;Standard Messages&rdquo;/ chapter 5.6 &ldquo;Queue Support&rdquo;).<br>
  Set attributes and elements of all appropriate descriptive elements and of their subelements.
</h5><h4>JDFDeviceFilter deviceFilter=queryKnownDevices.AppendDeviceFilter();<br>
  JDFDevice device=deviceFilter.AppendDevice();<br>
  device.SetDeviceID(&quot;DeviceID1&quot;);</h4>
<h5><br><strong>Step 4</strong><br>
  Serialize this document to a WString</h5>
<h4>WString outString;<br>
  Write2String(outString);<br>
  return outString;</h4>
</h5>
</body>
</html>
